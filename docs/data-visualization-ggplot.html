<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Visualization | Data Analysis in R: A Basic Guide</title>
  <meta name="description" content="This book provides a basic guide to data analysis using R, with a focus on the Home Mortgage Disclosure Act (HMDA) data as a practical example. It covers the essential techniques and tools needed to perform effective data analysis, offering step-by-step instructions and detailed explanations. The HTML output format for this book is bookdown::gitbook, as set in the _output.yml file." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Visualization | Data Analysis in R: A Basic Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book provides a basic guide to data analysis using R, with a focus on the Home Mortgage Disclosure Act (HMDA) data as a practical example. It covers the essential techniques and tools needed to perform effective data analysis, offering step-by-step instructions and detailed explanations. The HTML output format for this book is bookdown::gitbook, as set in the _output.yml file." />
  <meta name="github-repo" content="aisolori/Data-Analysis-in-R-A-Basic-Guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Visualization | Data Analysis in R: A Basic Guide" />
  
  <meta name="twitter:description" content="This book provides a basic guide to data analysis using R, with a focus on the Home Mortgage Disclosure Act (HMDA) data as a practical example. It covers the essential techniques and tools needed to perform effective data analysis, offering step-by-step instructions and detailed explanations. The HTML output format for this book is bookdown::gitbook, as set in the _output.yml file." />
  

<meta name="author" content="Antonio Solorio" />


<meta name="date" content="2024-07-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="03-na-values.html"/>
<link rel="next" href="advanced-ggplot.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in R: A Basic Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="hmda-data-intro.html"><a href="hmda-data-intro.html"><i class="fa fa-check"></i><b>1</b> What is HMDA Data?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="hmda-data-intro.html"><a href="hmda-data-intro.html#why-use-hmda-data"><i class="fa fa-check"></i><b>1.1</b> Why Use HMDA Data?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-importing.html"><a href="data-importing.html"><i class="fa fa-check"></i><b>2</b> Data Importing</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-importing.html"><a href="data-importing.html#different-types-of-data"><i class="fa fa-check"></i><b>2.1</b> Different Types of Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-importing.html"><a href="data-importing.html#why-start-with-csv-files"><i class="fa fa-check"></i><b>2.1.1</b> Why Start with CSV Files?</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="hmda-download-import.html"><a href="hmda-download-import.html"><i class="fa fa-check"></i><b>2.2</b> Downloading and Importing HMDA Data in CSV Format</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="hmda-download-import.html"><a href="hmda-download-import.html#snapshot-national-loan-level-dataset"><i class="fa fa-check"></i><b>2.2.1</b> Snapshot National Loan Level Dataset</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="hmda-download-import.html"><a href="hmda-download-import.html#importing-csv-files-in-r"><i class="fa fa-check"></i><b>2.3</b> Importing CSV Files in R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="hmda-download-import.html"><a href="hmda-download-import.html#using-read.csv"><i class="fa fa-check"></i><b>2.3.1</b> Using <code>read.csv()</code></a>
<ul>
<li class="chapter" data-level="" data-path="hmda-download-import.html"><a href="hmda-download-import.html#details-on-read.csv"><i class="fa fa-check"></i>Details on <code>read.csv()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3.2" data-path="hmda-download-import.html"><a href="hmda-download-import.html#using-read_csv-from-the-readr-package"><i class="fa fa-check"></i><b>2.3.2</b> Using <code>read_csv()</code> from the <code>readr</code> Package</a></li>
<li class="chapter" data-level="" data-path="hmda-download-import.html"><a href="hmda-download-import.html#details-on-read_csv"><i class="fa fa-check"></i>Details on <code>read_csv()</code></a>
<ul>
<li class="chapter" data-level="2.3.2.1" data-path="hmda-download-import.html"><a href="hmda-download-import.html#handling-parsing-issues"><i class="fa fa-check"></i><b>2.3.2.1</b> Handling Parsing Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.3.3" data-path="hmda-download-import.html"><a href="hmda-download-import.html#handling-file-paths"><i class="fa fa-check"></i><b>2.3.3</b> Handling File Paths</a></li>
<li class="chapter" data-level="2.3.4" data-path="hmda-download-import.html"><a href="hmda-download-import.html#common-issues-and-solutions"><i class="fa fa-check"></i><b>2.3.4</b> Common Issues and Solutions</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-in-chunks.html"><a href="data-in-chunks.html"><i class="fa fa-check"></i><b>2.4</b> Importing Data in Chunks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-exploration-and-cleaning.html"><a href="data-exploration-and-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data Exploration and Cleaning</a>
<ul>
<li class="chapter" data-level="3.1" data-path="exploring-hmda-data.html"><a href="exploring-hmda-data.html"><i class="fa fa-check"></i><b>3.1</b> Exploring and Cleaning the Data Structure</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="exploring-hmda-data.html"><a href="exploring-hmda-data.html#exploring-data-structure"><i class="fa fa-check"></i><b>3.1.1</b> Exploring Data Structure</a></li>
<li class="chapter" data-level="3.1.2" data-path="exploring-hmda-data.html"><a href="exploring-hmda-data.html#changing-data-types"><i class="fa fa-check"></i><b>3.1.2</b> Changing Data Types</a></li>
<li class="chapter" data-level="3.1.3" data-path="exploring-hmda-data.html"><a href="exploring-hmda-data.html#using-across-to-change-data-types-for-multiple-columns"><i class="fa fa-check"></i><b>3.1.3</b> Using across() to Change Data Types for Multiple Columns</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03-na-values.html"><a href="03-na-values.html"><i class="fa fa-check"></i><b>3.2</b> Spotting and Handling NA Values</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-na-values.html"><a href="03-na-values.html#common-ways-to-spot-na-values"><i class="fa fa-check"></i><b>3.2.1</b> Common Ways to Spot NA Values</a>
<ul>
<li class="chapter" data-level="" data-path="03-na-values.html"><a href="03-na-values.html#checking-for-any-na-values"><i class="fa fa-check"></i>Checking for Any NA Values</a></li>
<li class="chapter" data-level="" data-path="03-na-values.html"><a href="03-na-values.html#counting-na-values-per-column"><i class="fa fa-check"></i>Counting NA Values Per Column</a></li>
</ul></li>
<li class="chapter" data-level="3.2.2" data-path="03-na-values.html"><a href="03-na-values.html#visualizing-na-values-using-visdat-package"><i class="fa fa-check"></i><b>3.2.2</b> Visualizing NA Values Using <code>visdat</code> Package</a>
<ul>
<li class="chapter" data-level="" data-path="03-na-values.html"><a href="03-na-values.html#installing-and-loading-the-visdat-package"><i class="fa fa-check"></i>Installing and Loading the <code>visdat</code> Package</a></li>
<li class="chapter" data-level="" data-path="03-na-values.html"><a href="03-na-values.html#visualizing-na-values"><i class="fa fa-check"></i>Visualizing NA Values</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html"><i class="fa fa-check"></i><b>4</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#data-visualization-using-ggplot2"><i class="fa fa-check"></i><b>4.1</b> Data Visualization Using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#introduction-1"><i class="fa fa-check"></i><b>4.1.1</b> Introduction</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#getting-started-with-ggplot2"><i class="fa fa-check"></i><b>4.1.2</b> Getting Started with ggplot2</a></li>
<li class="chapter" data-level="4.1.3" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#creating-basic-plot-types-with-ggplot2"><i class="fa fa-check"></i><b>4.1.3</b> Creating Basic Plot Types with ggplot2</a>
<ul>
<li class="chapter" data-level="" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#histogram"><i class="fa fa-check"></i>Histogram</a></li>
<li class="chapter" data-level="" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#bar-plot"><i class="fa fa-check"></i>Bar Plot</a></li>
<li class="chapter" data-level="" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#box-plot"><i class="fa fa-check"></i>Box Plot</a></li>
<li class="chapter" data-level="" data-path="data-visualization-ggplot.html"><a href="data-visualization-ggplot.html#line-plot"><i class="fa fa-check"></i>Line Plot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html"><i class="fa fa-check"></i><b>4.2</b> Advanced ggplot2 Techniques</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#faceting"><i class="fa fa-check"></i><b>4.2.1</b> Faceting</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#facet-wrap"><i class="fa fa-check"></i>Facet Wrap</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#facet-grid"><i class="fa fa-check"></i>Facet Grid</a></li>
</ul></li>
<li class="chapter" data-level="4.2.2" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#customizing-themes"><i class="fa fa-check"></i><b>4.2.2</b> Customizing Themes</a>
<ul>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#using-built-in-themes"><i class="fa fa-check"></i>Using Built-in Themes</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#customizing-themes-in-ggplot2"><i class="fa fa-check"></i>Customizing Themes in ggplot2</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#customizing-text-elements"><i class="fa fa-check"></i>Customizing Text Elements</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#customizing-background-and-grid-lines"><i class="fa fa-check"></i>Customizing Background and Grid Lines</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#customizing-legend"><i class="fa fa-check"></i>Customizing Legend</a></li>
<li class="chapter" data-level="" data-path="advanced-ggplot.html"><a href="advanced-ggplot.html#complete-theme-customization-example"><i class="fa fa-check"></i>Complete Theme Customization Example</a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="regressions.html"><a href="regressions.html"><i class="fa fa-check"></i><b>5</b> Basic Regression Analysis in R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="regressions.html"><a href="regressions.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="regressions.html"><a href="regressions.html#preparing-the-data"><i class="fa fa-check"></i><b>5.1.1</b> Preparing the Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="regressions.html"><a href="regressions.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.2</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="regressions.html"><a href="regressions.html#fitting-the-model"><i class="fa fa-check"></i><b>5.2.1</b> Fitting the Model</a></li>
<li class="chapter" data-level="5.2.2" data-path="regressions.html"><a href="regressions.html#interpreting-the-results"><i class="fa fa-check"></i><b>5.2.2</b> Interpreting the Results</a>
<ul>
<li class="chapter" data-level="" data-path="regressions.html"><a href="regressions.html#coefficients"><i class="fa fa-check"></i>Coefficients</a></li>
<li class="chapter" data-level="" data-path="regressions.html"><a href="regressions.html#statistical-significance"><i class="fa fa-check"></i>Statistical Significance</a></li>
<li class="chapter" data-level="" data-path="regressions.html"><a href="regressions.html#model-fit"><i class="fa fa-check"></i>Model Fit</a></li>
<li class="chapter" data-level="" data-path="regressions.html"><a href="regressions.html#visualizing-the-regression-line"><i class="fa fa-check"></i>Visualizing the Regression Line</a></li>
<li class="chapter" data-level="" data-path="regressions.html"><a href="regressions.html#plotting-residuals-using-lm"><i class="fa fa-check"></i>Plotting Residuals Using <code>lm()</code></a></li>
</ul></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in R: A Basic Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-visualization" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Visualization<a href="data-visualization-ggplot.html#data-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="data-visualization-using-ggplot2" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Data Visualization Using <code>ggplot2</code><a href="data-visualization-ggplot.html#data-visualization-using-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="introduction-1" class="section level3 unlisted unumbered hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Introduction<a href="data-visualization-ggplot.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data visualization is a crucial step in data analysis as it helps in understanding the underlying patterns, trends, and relationships in the data. In this chapter, we will explore how to create various types of visualizations using the ggplot2 package in R, focusing on HMDA (Home Mortgage Disclosure Act) data.</p>
</div>
<div id="getting-started-with-ggplot2" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Getting Started with ggplot2<a href="data-visualization-ggplot.html#getting-started-with-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, ensure you have ggplot2 installed. If not, you can install it using:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-visualization-ggplot.html#cb20-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
<p>This will download the latest version of <code>ggplot2</code> from the CRAN repository.</p>
<p>Load the package along with with the HMDA data:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-visualization-ggplot.html#cb21-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb21-2"><a href="data-visualization-ggplot.html#cb21-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)  <span class="co"># For data manipulation</span></span>
<span id="cb21-3"><a href="data-visualization-ggplot.html#cb21-3" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>) <span class="co"># To prevent R from printing in scientific notation</span></span>
<span id="cb21-4"><a href="data-visualization-ggplot.html#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="data-visualization-ggplot.html#cb21-5" tabindex="-1"></a><span class="co"># Load HMDA data</span></span>
<span id="cb21-6"><a href="data-visualization-ggplot.html#cb21-6" tabindex="-1"></a>hmda_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;downloads/state_NV.csv&quot;</span>, <span class="at">guess_max =</span> <span class="cn">Inf</span>)</span></code></pre></div>
<p>Once we have the data loaded, we proceed to do some preliminary prep and cleanup. The schema for the different data fields avaialable can be found at: <a href="https://ffiec.cfpb.gov/documentation/publications/modified-lar/modified-lar-schema" class="uri">https://ffiec.cfpb.gov/documentation/publications/modified-lar/modified-lar-schema</a></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-visualization-ggplot.html#cb22-1" tabindex="-1"></a><span class="co"># Filter and prep HMDA data for plotting</span></span>
<span id="cb22-2"><a href="data-visualization-ggplot.html#cb22-2" tabindex="-1"></a>filtered_hmda_data <span class="ot">&lt;-</span> hmda_data<span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="data-visualization-ggplot.html#cb22-3" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb22-4"><a href="data-visualization-ggplot.html#cb22-4" tabindex="-1"></a>    <span class="co"># Filter for only originated transactions</span></span>
<span id="cb22-5"><a href="data-visualization-ggplot.html#cb22-5" tabindex="-1"></a>    action_taken <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb22-6"><a href="data-visualization-ggplot.html#cb22-6" tabindex="-1"></a>    <span class="co"># Filter for only for home purchases</span></span>
<span id="cb22-7"><a href="data-visualization-ggplot.html#cb22-7" tabindex="-1"></a>    loan_purpose <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb22-8"><a href="data-visualization-ggplot.html#cb22-8" tabindex="-1"></a>    <span class="co"># Filter for only primary homss</span></span>
<span id="cb22-9"><a href="data-visualization-ggplot.html#cb22-9" tabindex="-1"></a>    occupancy_type <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb22-10"><a href="data-visualization-ggplot.html#cb22-10" tabindex="-1"></a>    <span class="co"># Filter for primary liens</span></span>
<span id="cb22-11"><a href="data-visualization-ggplot.html#cb22-11" tabindex="-1"></a>    lien_status <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb22-12"><a href="data-visualization-ggplot.html#cb22-12" tabindex="-1"></a>    <span class="co"># Filter for single unit homes</span></span>
<span id="cb22-13"><a href="data-visualization-ggplot.html#cb22-13" tabindex="-1"></a>    total_units <span class="sc">==</span> <span class="st">&quot;1&quot;</span>,</span>
<span id="cb22-14"><a href="data-visualization-ggplot.html#cb22-14" tabindex="-1"></a>    <span class="co"># Filter propery value </span></span>
<span id="cb22-15"><a href="data-visualization-ggplot.html#cb22-15" tabindex="-1"></a>    <span class="sc">!</span>property_value <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Exempt&quot;</span>, <span class="cn">NA</span>),</span>
<span id="cb22-16"><a href="data-visualization-ggplot.html#cb22-16" tabindex="-1"></a>    <span class="co"># Filter income for values below 250 but above 0</span></span>
<span id="cb22-17"><a href="data-visualization-ggplot.html#cb22-17" tabindex="-1"></a>    income <span class="sc">&lt;=</span><span class="dv">250</span> <span class="sc">&amp;</span> income<span class="sc">&gt;</span><span class="dv">0</span>,</span>
<span id="cb22-18"><a href="data-visualization-ggplot.html#cb22-18" tabindex="-1"></a>    <span class="co"># Filter for Clark County</span></span>
<span id="cb22-19"><a href="data-visualization-ggplot.html#cb22-19" tabindex="-1"></a>    county_code <span class="sc">==</span> <span class="st">&quot;32003&quot;</span></span>
<span id="cb22-20"><a href="data-visualization-ggplot.html#cb22-20" tabindex="-1"></a>    </span>
<span id="cb22-21"><a href="data-visualization-ggplot.html#cb22-21" tabindex="-1"></a>  )<span class="sc">%&gt;%</span></span>
<span id="cb22-22"><a href="data-visualization-ggplot.html#cb22-22" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-23"><a href="data-visualization-ggplot.html#cb22-23" tabindex="-1"></a>    <span class="at">property_value =</span> <span class="fu">as.numeric</span>(property_value),</span>
<span id="cb22-24"><a href="data-visualization-ggplot.html#cb22-24" tabindex="-1"></a>    <span class="co"># Assigning labels for each loan_type</span></span>
<span id="cb22-25"><a href="data-visualization-ggplot.html#cb22-25" tabindex="-1"></a>    <span class="at">loan_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb22-26"><a href="data-visualization-ggplot.html#cb22-26" tabindex="-1"></a>      loan_type <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Conventional&quot;</span>,</span>
<span id="cb22-27"><a href="data-visualization-ggplot.html#cb22-27" tabindex="-1"></a>      loan_type <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;FHA&quot;</span>,</span>
<span id="cb22-28"><a href="data-visualization-ggplot.html#cb22-28" tabindex="-1"></a>      loan_type <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;VA&quot;</span>,</span>
<span id="cb22-29"><a href="data-visualization-ggplot.html#cb22-29" tabindex="-1"></a>      loan_type <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;USDA&quot;</span></span>
<span id="cb22-30"><a href="data-visualization-ggplot.html#cb22-30" tabindex="-1"></a>    ))<span class="sc">%&gt;%</span></span>
<span id="cb22-31"><a href="data-visualization-ggplot.html#cb22-31" tabindex="-1"></a>    <span class="co"># Only keep property values under $1 million</span></span>
<span id="cb22-32"><a href="data-visualization-ggplot.html#cb22-32" tabindex="-1"></a>  <span class="fu">filter</span>(property_value<span class="sc">&lt;</span><span class="dv">1000000</span>)</span></code></pre></div>
</div>
<div id="basic-plot-structure" class="section level3 unlisted unnumbered hasAnchor">
<h3>Basic Plot Structure<a href="data-visualization-ggplot.html#basic-plot-structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The structure of a ggplot2 plot is built around the <code>ggplot()</code>** function and the <code>+</code> operator to add layers. Here’s a simple example of a scatter pplot:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-visualization-ggplot.html#cb23-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filtered_hmda_data, <span class="fu">aes</span>(<span class="at">x =</span> income, <span class="at">y =</span> property_value))<span class="sc">+</span></span>
<span id="cb23-2"><a href="data-visualization-ggplot.html#cb23-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="images/basic_plot_structure_img_1.PNG" /></p>
<p>In this example, <code>ggplot()</code> is the initial function call to create a new plot. The function takes the following primary arguments:</p>
<ul>
<li><code>data</code>: This argument specifies the dataset to be used in the plot. In this case, <code>filtered_hmda_data</code> is the dataset containing the HMDA data.</li>
<li><code>aes()</code>: Short for aesthetics, this function defines the mapping of variables in your data to visual properties (aesthetics) such as x and y axes, colors, shapes, and sizes of points or lines. In the example, <code>x = income</code> maps the <code>income</code> variable to the x-axis, and <code>y = property_value</code> maps the <code>property_value</code> variable to the y-axis.</li>
</ul>
<p>After the initial <code>ggplot()</code> function, we add layers to the plot using the <strong><code>+</code></strong> operator. Each layer represents a specific component of the plot, such as points, lines, bars, etc.</p>
<ul>
<li><code>geom_point()</code>: This is a geometric object (geom) layer that adds a scatter plot layer to the plot. Each point represents an observation in the dataset.</li>
</ul>
</div>
<div id="creating-basic-plot-types-with-ggplot2" class="section level3 hasAnchor" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Creating Basic Plot Types with ggplot2<a href="data-visualization-ggplot.html#creating-basic-plot-types-with-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we will explore how to create various types of basic plots using ggplot2. We will start with histograms, bar plots, box plots, and line plots, each serving different purposes in data visualization.</p>
<div id="histogram" class="section level4 unnumbered hasAnchor">
<h4>Histogram<a href="data-visualization-ggplot.html#histogram" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Histograms are useful for visualizing the distribution of a single continuous variable. For example, let’s create a histogram to visualize the distribution of property values in our filtered HMDA data.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-visualization-ggplot.html#cb24-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filtered_hmda_data, <span class="fu">aes</span>(<span class="at">x =</span> property_value)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="data-visualization-ggplot.html#cb24-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">50000</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="data-visualization-ggplot.html#cb24-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution of Property Values&quot;</span>,</span>
<span id="cb24-4"><a href="data-visualization-ggplot.html#cb24-4" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Property Value&quot;</span>,</span>
<span id="cb24-5"><a href="data-visualization-ggplot.html#cb24-5" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>)</span></code></pre></div>
<p><img src="images/histogram_plot.PNG" /></p>
<ul>
<li><code>geom_histogram(binwidth = 50000, fill = "blue", color = "black")</code> adds a histogram layer with specified bin width, fill color, and border color.</li>
<li><code>labs()</code> is used to add titles and labels to the plot.</li>
</ul>
</div>
<div id="bar-plot" class="section level4 unnumbered hasAnchor">
<h4>Bar Plot<a href="data-visualization-ggplot.html#bar-plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bar plots are useful for visualizing categorical data. Let’s create a bar plot to visualize the count of loans by loan type.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-visualization-ggplot.html#cb25-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filtered_hmda_data, <span class="fu">aes</span>(<span class="at">x =</span> loan_type)) <span class="sc">+</span></span>
<span id="cb25-2"><a href="data-visualization-ggplot.html#cb25-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb25-3"><a href="data-visualization-ggplot.html#cb25-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Count of Loans by Loan Type&quot;</span>,</span>
<span id="cb25-4"><a href="data-visualization-ggplot.html#cb25-4" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Loan Type&quot;</span>,</span>
<span id="cb25-5"><a href="data-visualization-ggplot.html#cb25-5" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>)</span></code></pre></div>
<ul>
<li><code>ggplot(data = filtered_hmda_data, aes(x = loan_type))</code>: This line initializes the ggplot object with the specified dataset (<code>filtered_hmda_data</code>) and maps the loan_type column to the x-axis.</li>
<li><code>geom_bar()</code>: This adds a bar plot layer to the ggplot object. By default, geom_bar() counts the number of occurrences of each loan_type.</li>
<li><code>labs(title = "Count of Loans by Loan Type", x = "Loan Type", y = "Count")</code>: This function is used to add titles and labels to the plot. It specifies the plot title and labels for the x and y axes..</li>
</ul>
<p><img src="images/bar_plot.PNG" /></p>
</div>
<div id="box-plot" class="section level4 unnumbered hasAnchor">
<h4>Box Plot<a href="data-visualization-ggplot.html#box-plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Box plots are useful for visualizing the distribution of a continuous variable across different categories. Let’s create a box plot to visualize property values by loan type.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-visualization-ggplot.html#cb26-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filtered_hmda_data, <span class="fu">aes</span>(<span class="at">x =</span> loan_type, <span class="at">y =</span> property_value)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="data-visualization-ggplot.html#cb26-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb26-3"><a href="data-visualization-ggplot.html#cb26-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Property Values by Loan Type&quot;</span>,</span>
<span id="cb26-4"><a href="data-visualization-ggplot.html#cb26-4" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Loan Type&quot;</span>,</span>
<span id="cb26-5"><a href="data-visualization-ggplot.html#cb26-5" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Property Value&quot;</span>)</span></code></pre></div>
<p><img src="images/box_plot.PNG" /></p>
<p>In this example:</p>
<ul>
<li><p><code>geom_boxplot()</code> adds a box plot layer.</p></li>
<li><p><code>labs()</code> is used to add titles and labels to the plot.</p></li>
</ul>
</div>
<div id="line-plot" class="section level4 unnumbered hasAnchor">
<h4>Line Plot<a href="data-visualization-ggplot.html#line-plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Line plots are useful for visualizing trends over time or ordered categories. Since the HMDA data we have been working with is not historical, we will use one of R’s built-in datasets, AirPassengers, to demonstrate creating a line plot. The <code>AirPassengers</code> dataset contains monthly totals of international airline passengers from 1949 to 1960.</p>
<p>First, let’s load the dataset and take a look at its structure:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-visualization-ggplot.html#cb27-1" tabindex="-1"></a><span class="co"># Load the AirPassengers dataset</span></span>
<span id="cb27-2"><a href="data-visualization-ggplot.html#cb27-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;AirPassengers&quot;</span>)</span>
<span id="cb27-3"><a href="data-visualization-ggplot.html#cb27-3" tabindex="-1"></a>airpassengers_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb27-4"><a href="data-visualization-ggplot.html#cb27-4" tabindex="-1"></a>  <span class="at">Month =</span> <span class="fu">time</span>(AirPassengers),</span>
<span id="cb27-5"><a href="data-visualization-ggplot.html#cb27-5" tabindex="-1"></a>  <span class="at">Passengers =</span> <span class="fu">as.numeric</span>(AirPassengers)</span>
<span id="cb27-6"><a href="data-visualization-ggplot.html#cb27-6" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="images/airplane_table_head.PNG" /></p>
<p>The <code>airpassengers_data</code> dataframe has two columns: <code>Month</code> and <code>Passengers</code>.</p>
</div>
<div id="creating-a-line-plot" class="section level4 unnumbered unlisted hasAnchor">
<h4>Creating a Line Plot<a href="data-visualization-ggplot.html#creating-a-line-plot" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now, let’s create a line plot to visualize the trend of airline passengers over time.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-visualization-ggplot.html#cb28-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> airpassengers_data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Passengers)) <span class="sc">+</span></span>
<span id="cb28-2"><a href="data-visualization-ggplot.html#cb28-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-3"><a href="data-visualization-ggplot.html#cb28-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Trend of Airline Passengers Over Time&quot;</span>,</span>
<span id="cb28-4"><a href="data-visualization-ggplot.html#cb28-4" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb28-5"><a href="data-visualization-ggplot.html#cb28-5" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Number of Passengers&quot;</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="data-visualization-ggplot.html#cb28-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="images/line_graph_example.PNG" /></p>
<p>In this example:</p>
<ul>
<li><p><code>ggplot(data = airpassengers_data, aes(x = Month, y = Passengers))</code>: Initializes the ggplot object with the <code>airpassengers_data</code> dataset and maps the <code>Month</code> column to the x-axis and the <code>Passengers</code> column to the y-axis.</p></li>
<li><p><code>geom_line(color = "blue")</code>: Adds a line plot layer with the line color set to blue.</p></li>
<li><p><code>labs(title = "Trend of Airline Passengers Over Time", x = "Month", y = "Number of Passengers")</code>: Adds a title and labels to the plot.</p></li>
<li><p><code>theme_minimal()</code>: Applies a minimalistic theme to the plot.</p></li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="03-na-values.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="advanced-ggplot.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": "github"
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aisolori/Data-Analysis-in-R-A-Basic-Guide/edit/main/chapter4/data-visualization-ggplot.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"repo": "https://github.com/aisolori/Data-Analysis-in-R-A-Basic-Guide"
});
});
</script>

</body>

</html>
